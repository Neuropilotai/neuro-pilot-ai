<!DOCTYPE html>
<html>
<head>
    <title>Order Professional AI Resume - Neuro.Pilot.AI [UPDATED-v2.6]</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { color: #333; text-align: center; }
        .package { border: 2px solid #ddd; padding: 15px; margin: 10px 0; cursor: pointer; border-radius: 8px; }
        .package.selected { border-color: #4CAF50; background-color: #f0f8f0; }
        .package h3 { margin: 0 0 10px 0; color: #333; }
        .package .price { font-size: 24px; font-weight: bold; color: #4CAF50; margin: 10px 0; }
        .form-group { margin: 15px 0; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .form-group textarea { height: 100px; resize: vertical; }
        .promo-section { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; }
        .promo-input { display: flex; gap: 10px; margin-top: 10px; }
        .promo-input input { flex: 1; }
        .promo-input button { padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .price-display { background: #e8f5e8; padding: 15px; border-radius: 8px; text-align: center; margin: 20px 0; }
        .price-display .final-price { font-size: 28px; font-weight: bold; color: #2d5a3d; }
        .price-display .original-price { text-decoration: line-through; color: #666; margin-right: 10px; }
        .price-display .discount { color: #e53e3e; font-weight: bold; }
        .submit-button { width: 100%; padding: 15px; background: #4CAF50; color: white; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; }
        .submit-button:hover { background: #45a049; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Order Professional AI Resume</h1>
        
        <div class="package" data-package="basic" data-price="25">
            <h3>Basic Package</h3>
            <div class="price">$25</div>
            <ul>
                <li>Professional formatting</li>
                <li>ATS optimization</li>
                <li>1 revision</li>
                <li>24-hour delivery</li>
            </ul>
        </div>
        
        <div class="package selected" data-package="professional" data-price="45">
            <h3>Professional Package</h3>
            <div class="price">$45</div>
            <ul>
                <li>Everything in Basic</li>
                <li>Cover letter included</li>
                <li>LinkedIn optimization tips</li>
                <li>3 revisions</li>
                <li>12-hour delivery</li>
            </ul>
        </div>
        
        <div class="package" data-package="executive" data-price="85">
            <h3>Executive Package</h3>
            <div class="price">$85</div>
            <ul>
                <li>Everything in Professional</li>
                <li>Executive summary</li>
                <li>Industry-specific keywords</li>
                <li>5 revisions</li>
                <li>6-hour delivery</li>
            </ul>
        </div>
        
        <form id="orderForm">
            <input type="hidden" name="packageType" value="professional">
            <input type="hidden" name="price" value="45">
            
            <div class="form-group">
                <label>First Name *</label>
                <input type="text" name="firstName" required>
            </div>
            
            <div class="form-group">
                <label>Last Name *</label>
                <input type="text" name="lastName" required>
            </div>
            
            <div class="form-group">
                <label>Email *</label>
                <input type="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label>Job Title You're Applying For *</label>
                <input type="text" name="jobTitle" required>
            </div>
            
            <div class="promo-section">
                <h3>Promo Code (Optional)</h3>
                <div class="promo-input">
                    <input type="text" id="promoCode" placeholder="Enter promo code">
                    <button type="button" id="applyPromo">Apply</button>
                </div>
                <div id="promoMessage" style="margin-top: 10px;"></div>
            </div>
            
            <div class="price-display">
                <div class="final-price">Total: <span id="finalPrice">$45</span></div>
                <div style="margin-top: 10px;">
                    <span id="originalPrice" style="display: none;">$45</span>
                    <span id="discount" style="display: none;">-$0</span>
                </div>
            </div>
            
            <button type="submit" class="submit-button">💳 Proceed to Secure Payment</button>
        </form>
    </div>
    
    <script>
        console.log("=== SCRIPT STARTING v2.6 - STANDALONE FILE - " + new Date().toISOString() + " ===");
        
        // Define promo codes object
        var promoCodes = {
            "FAMILY2025": { discount: 100, type: "percentage", description: "Family Test - 100% OFF" },
            "TEST50": { discount: 50, type: "percentage", description: "50% OFF Test Code" },
            "FIRST10": { discount: 10, type: "fixed", description: "$10 OFF Your First Order" }
        };
        
        console.log("Promo codes defined:", Object.keys(promoCodes));
        
        // Wait for DOM to be ready before attaching event listeners
        document.addEventListener("DOMContentLoaded", function() {
            console.log("DOM is ready, attaching event listeners...");
            
            // Test basic DOM elements
            console.log("Package elements found:", document.querySelectorAll(".package").length);
            console.log("Apply promo button:", !!document.getElementById("applyPromo"));
            console.log("Final price element:", !!document.getElementById("finalPrice"));
            console.log("Promo message element:", !!document.getElementById("promoMessage"));
            
            // Global variables - accessible from everywhere (using var for maximum compatibility)
            var currentPrice = 45;
            var appliedDiscount = 0;
            var promoCodeApplied = false;
            
            console.log("Global variables set - currentPrice:", currentPrice, "promoCodeApplied:", promoCodeApplied);
            
            // Define updatePriceDisplay function FIRST - before any other code
            function updatePriceDisplay() {
                const finalPrice = Math.max(0, currentPrice - appliedDiscount);
                console.log("updatePriceDisplay called - currentPrice:", currentPrice, "appliedDiscount:", appliedDiscount, "finalPrice:", finalPrice);
                
                const finalPriceEl = document.getElementById("finalPrice");
                if (finalPriceEl) {
                    finalPriceEl.textContent = "$" + finalPrice;
                    console.log("Final price updated to:", "$" + finalPrice);
                } else {
                    console.error("finalPrice element not found!");
                }
                
                if (appliedDiscount > 0) {
                    const originalPriceEl = document.getElementById("originalPrice");
                    const discountEl = document.getElementById("discount");
                    
                    if (originalPriceEl) {
                        originalPriceEl.style.display = "block";
                        originalPriceEl.textContent = "$" + currentPrice;
                    }
                    if (discountEl) {
                        discountEl.style.display = "block";
                        discountEl.textContent = appliedDiscount >= currentPrice ? "FREE!" : "-$" + appliedDiscount;
                    }
                } else {
                    const originalPriceEl = document.getElementById("originalPrice");
                    const discountEl = document.getElementById("discount");
                    
                    if (originalPriceEl) originalPriceEl.style.display = "none";
                    if (discountEl) discountEl.style.display = "none";
                }
                
                // Update hidden price field
                const priceInput = document.querySelector("input[name='price']");
                if (priceInput) {
                    priceInput.value = finalPrice;
                    console.log("Hidden price input updated to:", finalPrice);
                } else {
                    console.error("Price input field not found!");
                }
            }
            
            console.log("updatePriceDisplay function defined!");
            
            // Package selection - attach event listeners
            document.querySelectorAll(".package").forEach(pkg => {
                pkg.addEventListener("click", function() {
                    console.log("Package clicked:", this.dataset.package, "Price:", this.dataset.price);
                    document.querySelectorAll(".package").forEach(p => p.classList.remove("selected"));
                    this.classList.add("selected");
                    document.querySelector("input[name='packageType']").value = this.dataset.package;
                    
                    // Update current price
                    currentPrice = parseInt(this.dataset.price);
                    console.log("Current price updated to:", currentPrice);
                    
                    // Recalculate discount if promo code is applied
                    if (promoCodeApplied) {
                        const promoCode = document.getElementById("promoCode").value.toUpperCase();
                        const promo = promoCodes[promoCode];
                        if (promo) {
                            appliedDiscount = promo.type === "percentage" ? 
                                Math.round(currentPrice * promo.discount / 100) : 
                                Math.min(promo.discount, currentPrice);
                            console.log("Discount recalculated:", appliedDiscount);
                        }
                    }
                    
                    console.log("Calling updatePriceDisplay...");
                    updatePriceDisplay();
                });
            });
            
            // Promo code application
            document.getElementById("applyPromo").addEventListener("click", function() {
                const promoCode = document.getElementById("promoCode").value.toUpperCase();
                const messageEl = document.getElementById("promoMessage");
                
                console.log("Promo code apply clicked:", promoCode);
                
                if (!promoCode) {
                    messageEl.innerHTML = '<span style="color: #e53e3e;">Please enter a promo code</span>';
                    return;
                }
                
                const promo = promoCodes[promoCode];
                console.log("Found promo:", promo);
                
                if (promo) {
                    appliedDiscount = promo.type === "percentage" ? 
                        Math.round(currentPrice * promo.discount / 100) : 
                        Math.min(promo.discount, currentPrice);
                    
                    console.log("Discount calculated:", appliedDiscount, "for current price:", currentPrice);
                    
                    promoCodeApplied = true;
                    messageEl.innerHTML = '<span style="color: #38a169;">✅ ' + promo.description + ' applied!</span>';
                    console.log("Calling updatePriceDisplay from promo code...");
                    updatePriceDisplay();
                } else {
                    messageEl.innerHTML = '<span style="color: #e53e3e;">❌ Invalid promo code</span>';
                    console.log("Invalid promo code entered");
                }
            });
            
            console.log("All event listeners attached successfully!");
        });
    </script>
</body>
</html>